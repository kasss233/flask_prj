{% extends "base.html" %}

{% block content %}
    <h1>åˆ†äº«çš„å†…å®¹: {{ shared_item_name }}</h1>
    <p>ç”±ç”¨æˆ· <strong>{{ owner_username }}</strong> åˆ†äº«äº {{ creation_date.strftime('%Y-%m-%d %H:%M:%S') }} UTC</p>

    <div class="current-path">å½“å‰è·¯å¾„: <strong>/{{ current_dir_display }}</strong></div>

    {# Parent directory link within the shared context #}
    {% if current_dir_normalized != "" and parent_dir is not none %}
      <a href="{{ url_for('main.access_shared_item', share_token=share_token, sub_path=parent_dir) }}" class="parent-link">è¿”å›ä¸Šä¸€çº§ ({{ parent_dir_display }})</a>
    {% endif %}

    <h2>ç›®å½•å’Œæ–‡ä»¶</h2>
    <ul>
      {% for item in items %}
        {% if item.is_dir %}
          <li class="dir">
            <span class="item-details">
              <span class="item-name"><span class="item-icon">ğŸ“</span>
                {# Link to navigate within the shared folder. item.path is relative to shared root #}
                <a href="{{ url_for('main.access_shared_item', share_token=share_token, sub_path=item.path) }}" class="item-name-link">{{ item.name }}</a>
              </span>
            </span>
            <span class="actions">
              {# No actions like delete/rename for shared items by default #}
            </span>
          </li>
        {% else %}
          <li class="file">
            <span class="item-details">
              <span class="item-name"><span class="item-icon">ğŸ“„</span><span class="item-name-link">{{ item.name }}</span></span>
            </span>
            <span class="actions">
              {# Link to download file from shared folder. item.path is relative to shared root #}
              <a href="{{ url_for('main.access_shared_item', share_token=share_token, sub_path=item.path, download='true') }}" class="download">ä¸‹è½½</a>
            </span>
          </li>
        {% endif %}
      {% endfor %}
      {% if not items %}
        <li>æ­¤åˆ†äº«ç›®å½•ä¸ºç©ºæˆ–æ— æ³•è®¿é—®å†…å®¹ã€‚</li>
      {% endif %}
    </ul>
    
    {% if current_user.is_authenticated %}
    <p style="margin-top: 20px;"><a href="{{ url_for('main.manage_files') }}">è¿”å›æˆ‘çš„æ–‡ä»¶ç®¡ç†å™¨</a></p>
    {% endif %}
{% endblock %}
